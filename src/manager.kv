#:kivy 2.0.0
#:import FadeTransition kivy.uix.screenmanager.FadeTransition
#:import Factory kivy.factory.Factory

Man:
    transition: FadeTransition()
    MenuScreen:
    GameScreen:

<GameButton@ToggleButton>:
    group: 'game'
    on_press:
        self.parent.parent.check(self)
        #self.background_color = (0,0,0,0)
    #on_release:
        #self.background_color = (1,1,1,1)
    background_color: (1,1,1,1)
    background_normal: ''

<Lost>:
    title: 'Loss!'
    size_hint: .4,.5
    auto_dismiss: False

    BoxLayout:
        orientation: 'vertical'
        Label:
            text: 'You lost!'
        Button:
            size_hint: 1, .2
            text: 'Restart'
            on_press: app.root.get_screen('gamescreen').restart()
            on_release: root.dismiss()

<Won>:
    title: 'Win!'
    size_hint: .4,.5
    auto_dismiss: False

    BoxLayout:
        orientation: 'vertical'
        Label:
            text: 'You won!'
        Button:
            size_hint: 1, .2
            text: 'Restart'
            on_press: app.root.get_screen('gamescreen').restart()
            on_release: root.dismiss()

<MenuScreen>:
    name: 'menuscreen'
    FloatLayout:
        canvas.before:
            Color:
                rgba: (1,253/255,208/255,1)
            Rectangle:
                pos: self.pos
                size: self.size
        Button:
            text: 'Start!'
            color: 172/255, 115/255, 0, 0.5
            on_press: app.root.get_screen('gamescreen').change_flag()
            on_release: app.root.current = 'gamescreen'
            background_color: (0,0,0,0)
            background_normal: ''
            size_hint: (0.5,0.3)
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            canvas.before:
                Color:
                    rgba: (231/255, 187/255, 0, 0.3)
                RoundedRectangle:
                    size: self.size
                    pos: self.pos
                    radius: [50]


<GameScreen>:
    name: 'gamescreen'
    GridLayout:
        cols: 3
        padding: 5
        spacing: 5
        GameButton:
            text: '8'
            #on_release: Factory.Won().open()
        GameButton:
            text: '7'
        GameButton:
            text: '6'
        GameButton:
            text: '5'
        GameButton:
            text: '4'
        GameButton:
            text: '3'
        GameButton:
            text: '2'
        GameButton:
            text: '1'
        GameButton:
            text: '0'
